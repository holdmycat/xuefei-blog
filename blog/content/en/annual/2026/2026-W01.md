---
title: "Week 01, 2026 - Combat Loop & Core Gameplay Verification"
date: 2026-01-07
week: "2026-W01"
tags: ["Unity", "SLG", "Combat"]
draft: true
---

## This Week's Progress

### January 4, 2026 (Sunday)

- âœ… **Deep Clone Optimization**: Deprecated BSON serialization deep copy, implemented `NPDataCloneUtility` + `Clone()` manual cloning pattern, resolving lock contention and significantly lowering GC.
- âœ… **Blackboard Data Fix**: Identified and fixed data loss issue caused by missing `[Serializable]` on `ANP_BBValue`.
- âœ… **Toolchain Construction**: Developed `ActionNodeGeneratorWindow` for automated Action/Node script generation.
- âœ… **Editor Optimization**: Implemented Graph Assets opening in separate windows to optimize multi-screen workflow.
- ðŸ“… **Tomorrow's Plan**:
  1. **Stack Animation FSM**: Categorize stack animation states by UnitClassType and integrate with Behavior Tree.
  2. **Combat Loop**: Verify complete flow: Soldier Spawn -> Idle -> Detect Enemy -> Chase.

### January 3, 2026 (Saturday)

- âœ… **Behavior Tree Architecture**: Finalized the "Isomorphic Tree + Root Selector + Blackboard Sync" architecture, resolving the dual-logic reuse challenge.
- âœ… **Zenject Integration**: Resolved the Zenject 6 `AsSingle` + `WithId` conflict and implemented the NP Behavior Tree DI Factory pattern.
- âœ… **Dual World Clock**: Implemented `ServerClockDriver` and `ClientClockDriver`, bridging NP `Clock` to Zenject's `FixedTick` system.
- âœ… **Documentation**: Produced three core architecture documents (Logic map, Problem/Solution) and auto-synced them to the tech blog.
- ðŸ“… **Tomorrow's Plan**:
  1. **Attack Loop**: Target Acquisition (Distance Check) -> Attack (Timer/Cooldown).
  2. **Damage Calculation**: Server calc damage, sync HP changes.
  3. **Visual Feedback**: Client plays attack anim & hit VFX (RPC).

### January 2, 2026 (Friday)

- âœ… **Formation System**: Implemented config-based Phalanx formation logic with relative coordinate support for Commanders.
- âœ… **Entity Rendering**: Implemented Soldier model loading and prepared for GPU Instancing (currently using Prefab mode).
- âœ… **Editor Visualization**: Added Gizmos for Spawn Points and Squad boundaries to facilitate debugging.

### January 1, 2026 (Thursday)

- âœ… **Numeric System Refactor**: Implemented Modifier-based architecture supporting `Base -> Modifier -> Final` with auto-calculation and broadcasting.
- âœ… **Squad UI Architecture**: Designed and implemented `SquadInfoViewModel` & `SquadInfoWidget`, completing the dynamic binding between Commander and Squad UI.
- âœ… **Data Persistence Fix**: Resolved `ShowcaseContext` data loss issue during UI reload (optimized `Register` timing).
- âœ… **Technical Documentation**: Published Numeric System Architecture docs and established auto-sync Git workflow to the blog.
- ðŸ“… **Tomorrow's Plan**:
  1. **Spawn Position**: Add Commander/Squad spawn logic and Editor Gizmos.
  2. **Formation**: Implement Squad formation logic.
  3. **Rendering**: Load and render Soldier entities.
  4. **Self-Check**: Review and fix potential issues.

### December 31, 2025 (Wednesday - Pre-week)

- âœ… **Yearly Transition**: Completed 2025 summary and archived work; established development plan for Week 1 of 2026.
- ðŸ“… **Tomorrow's Plan**:
  - **Legion Decision**: Evaluate the necessity of the Legion layer.
  - **Squad & UI Sync**: Complete synchronization between Squad data and UI.
  - **Soldier Loading**: Implement entity loading for Soldiers under Squads.
