<!DOCTYPE html>
<html lang="en">
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>无遗憾地交付战斗技能系统 · 雪飞的博客</title>
  <meta name="description" content="记录游戏系统、Unity 工具链、性能与流水线的实践。">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700&family=Space+Mono&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/css/main.css">
</head>
<body>
  <header class="site-header">
    <div class="brand">
      <a href="/">雪飞的博客</a>
      <p class="subtitle">游戏系统 · Unity · 性能笔记</p>
    </div>
    <div class="nav-wrap">
      <nav class="menu">
        
          <a href="/" class="menu-link">首页</a>
        
          <a href="/posts/" class="menu-link">文章</a>
        
          <a href="/projects/" class="menu-link">项目</a>
        
          <a href="/about/" class="menu-link">关于</a>
        
      </nav>
      <div class="lang-switch">
        
        
          
        
          
        
        
          <a href="/zh/" class="lang-link active">中文</a>
        
          <a href="/en/" class="lang-link">English</a>
        
          <a href="/zh/" class="lang-link active">中文</a>
        
      </div>
    </div>
  </header>

  <main class="site-main">
    
<article class="post">
  <div class="meta">
    <span>Feb 10, 2024</span>
    
      <span class="dot">•</span>
      
        <a href="/categories/game-systems/" class="pill">Game Systems</a>
      
    
  </div>
  <h1>无遗憾地交付战斗技能系统</h1>
  <p class="lead">在 IL2CPP 下做确定性、设计师友好且性能可控的技能系统的一些笔记。</p>
  <div class="content"><p>在 IL2CPP 下设计战斗系统，需要同时兼顾确定性、可读性和工具链支持。</p>
<h2 id="架构草图">架构草图</h2>
<ul>
<li><strong>数据优先</strong>：用 <code>ScriptableObject</code> 携带不可变的技能数据。</li>
<li><strong>确定性核心</strong>：运行时图保持无 <code>DateTime</code>、避免漂移的浮点和线程不安全缓存。</li>
<li><strong>创作安全</strong>：编辑器校验，构建时阻断残留的反射调用。</li>
</ul>
<h2 id="实用模式">实用模式</h2>
<ol>
<li><strong>Action atoms</strong> — 极小的可组合命令（生成 VFX、施加力、排队后续动作），由数据串联。</li>
<li><strong>状态镜像</strong> — 将战斗状态镜像成纯 struct 世界，方便回滚或回放。</li>
<li><strong>AOT 卫生</strong> — 预热泛型实例化，技能效果避开后期绑定反射。</li>
</ol>
<h2 id="出货前清单">出货前清单</h2>
<ul>
<li>Burst 编译的热点在目标硬件上过 Profiling。</li>
<li>跨平台确定性检查通过。</li>
<li>技能创作期的校验在 CI 里全绿。</li>
<li>网络负载大小有记录并纳入预算。</li>
</ul>
<p>后续会写更多关于 Unity 工具链、流水线和 AI 辅助流程的短笔记。</p>
</div>

  
    <div class="tag-row">
      <a class="tag" href="/tags/skillsystem/">#SkillSystem</a><a class="tag" href="/tags/unity/">#Unity</a><a class="tag" href="/tags/performance/">#Performance</a><a class="tag" href="/tags/aot/">#AOT</a><a class="tag" href="/tags/il2cpp/">#IL2CPP</a>
    </div>
  
</article>

  </main>

  <footer class="site-footer">
    <p>使用 Hugo · 2025</p>
  </footer>
</body>
</html>
